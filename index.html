<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catequese Viva - Luz e Vida</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Lora:ital,wght@0,400;1,400&display=swap" rel="stylesheet">
    <style>
        :root {
            --gold: #b8860b;
            --gold-light: #ffd700;
            --deep-night: #05070a;
            --paper: #fdfdfd;
        }

        body {
            margin: 0;
            font-family: 'Lora', serif;
            background: radial-gradient(circle at center, #1a2533 0%, var(--deep-night) 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #333;
            overflow-x: hidden;
        }

        /* BOT√ÉO LIGAR/DESLIGAR SOM (FIXO NO CANTO) */
        #musicToggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            background: var(--gold);
            border: 2px solid white;
            color: white;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.5);
            transition: 0.3s;
        }
        #musicToggle:hover { transform: scale(1.1); background: var(--gold-light); }

        #startScreen {
            position: fixed;
            inset: 0;
            background: var(--deep-night);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            color: var(--gold-light);
            text-align: center;
        }

        #startScreen h1 { font-family: 'Cinzel', serif; font-size: 3.5rem; margin: 0; }

        .btn-start {
            background: var(--gold);
            color: white;
            border: none;
            padding: 20px 60px;
            font-size: 1.2rem;
            font-family: 'Cinzel', serif;
            cursor: pointer;
            transition: 0.4s;
            margin-top: 40px;
            border-radius: 4px;
            box-shadow: 0 0 15px rgba(184, 134, 11, 0.4);
        }

        .btn-start:hover { transform: scale(1.05); background: var(--gold-light); color: var(--deep-night); }

        .quiz-container {
            background: var(--paper);
            border-top: 10px solid var(--gold);
            padding: 40px;
            width: 90%;
            max-width: 480px;
            box-shadow: 0 0 60px rgba(0,0,0,0.8);
            display: none;
            text-align: center;
            border-radius: 4px;
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .stats { color: var(--gold); font-family: 'Cinzel'; font-weight: bold; display: flex; justify-content: space-between; margin-bottom: 15px; }
        .timer-container { width: 100%; height: 5px; background: #eee; margin-bottom: 25px; border-radius: 10px; overflow: hidden;}
        #timerBar { height: 100%; width: 100%; background: var(--gold); transition: width 0.1s linear; }

        .image-frame { width: 100%; height: 220px; margin-bottom: 25px; border: 5px solid white; box-shadow: 0 10px 20px rgba(0,0,0,0.15); }
        .image-frame img { width: 100%; height: 100%; object-fit: cover; }

        .answers { display: grid; gap: 12px; }
        .answers button {
            background: #f4f4f4;
            border: 1px solid #ddd;
            padding: 16px;
            cursor: pointer;
            text-align: left;
            font-size: 1rem;
            font-family: 'Lora';
            border-radius: 4px;
            transition: 0.2s;
        }
        .answers button:hover:not(:disabled) { border-color: var(--gold); background: #fff; }

        .next-btn {
            background: var(--deep-night);
            color: white;
            border: none;
            padding: 18px;
            width: 100%;
            margin-top: 25px;
            font-family: 'Cinzel';
            display: none;
            cursor: pointer;
        }

        .result-title { font-family: 'Cinzel'; color: var(--gold); font-size: 2rem; }
        .result-verse { background: #f9f9f9; padding: 20px; border-left: 4px solid var(--gold); font-style: italic; margin: 20px 0; }
    </style>
</head>
<body>

<button id="musicToggle" onclick="toggleMusic()">üîä</button>

<div id="startScreen">
    <div style="border: 2px solid var(--gold); padding: 50px;">
        <h1>LUX LUCET</h1>
        <p style="letter-spacing: 3px; opacity: 0.8;">A LUZ BRILHA NAS TREVAS</p>
        <button class="btn-start" onclick="initGame()">ENTRAR NA LUZ</button>
    </div>
</div>

<div class="quiz-container" id="quizBox">
    <div class="stats">
        <span>MIST√âRIO <span id="progress">1</span>/10</span>
        <span>TEMPO: <span id="timeText">10</span>s</span>
    </div>
    <div class="timer-container"><div id="timerBar"></div></div>
    <div class="image-frame"><img id="image" src=""></div>
    <h2 id="question" style="color:#111; font-size: 1.4rem;"></h2>
    <div class="answers" id="answers"></div>
    <div id="feedback" style="margin-top: 20px; font-weight: bold; min-height: 1.2em;"></div>
    <button class="next-btn" id="nextBtn" onclick="nextQ()">AVAN√áAR PARA A PR√ìXIMA LUZ</button>
</div>

<audio id="bgMusic" loop src="https://cdn.pixabay.com/audio/2023/07/30/audio_e0908e8569.mp3"></audio>
<audio id="soundCorrect" src="https://cdn.pixabay.com/audio/2025/10/06/audio_9b61cc485a.mp3"></audio>
<audio id="soundWrong" src="https://cdn.pixabay.com/audio/2022/03/10/audio_6b59debae7.mp3"></audio>

<script>
const quizData = [
    { q: "Qual o Sacramento que nos torna filhos de Deus?", a: ["Batismo", "Crisma", "Eucaristia", "Un√ß√£o"], c: 0, img: "https://images.a12.com/source/files/c/248514/batismo-batizado-368531_1280-853-0-0.jpg" },
    { q: "Quantos s√£o os Mandamentos da Lei de Deus?", a: ["7", "10", "12", "5"], c: 1, img: "https://cms-imgp.jw-cdn.org/img/p/502018139/univ/art/502018139_univ_lsr_lg.jpg" },
    { q: "Quem √© o Pai de Jesus na Terra?", a: ["S√£o Pedro", "S√£o Paulo", "S√£o Jos√©", "S√£o Jo√£o"], c: 2, img: "https://files.mormonsud.net/wp-content/uploads/2019/12/jose-e-maria-natal.jpg" },
    { q: "Qual a principal ora√ß√£o que Jesus nos ensinou?", a: ["Ave Maria", "Pai Nosso", "Credo", "Salve Rainha"], c: 1, img: "https://revistaadventista.com.br/wp-content/uploads/a_oracao_modelo_credito_AdobeStock-1-810x540.jpg" },
    { q: "Onde Jesus nasceu?", a: ["Nazar√©", "Jerusal√©m", "Bel√©m", "Roma"], c: 2, img: "https://img.freepik.com/vetores-gratis/presepio-da-silhueta-a-noite_52683-51309.jpg?semt=ais_hybrid&w=740&q=80" },
    { q: "Quem √© a M√£e de Jesus?", a: ["Maria Madalena", "Marta", "Maria", "Isabel"], c: 2, img: "https://diocesefranca.org.br/images/20221230092213_SAGRADA-FAMILIA.png" },
    { q: "Quantos s√£o os Sacramentos da Igreja?", a: ["3", "5", "7", "10"], c: 2, img: "https://saosebastiaopatos.com.br/wp-content/uploads/2024/01/50.reflita.png" },
    { q: "Qual o livro sagrado dos crist√£os?", a: ["Alcor√£o", "Tor√°", "B√≠blia", "Catecismo"], c: 2, img: "https://i0.wp.com/ssvpcmbh.org.br/wp-content/uploads/2020/09/naom_562b8ba088c49.jpg?fit=1024%2C576&ssl=1" },
    { q: "Quem foi o primeiro Papa da Igreja?", a: ["S√£o Paulo", "S√£o Jo√£o", "S√£o Pedro", "S√£o Tiago"], c: 2, img: "https://cooperadoresdaverdade.com/wp-content/uploads/2020/05/O-que-%C3%A9-Patr%C3%ADstica.jpg" },
    { q: "O que celebramos na P√°scoa?", a: ["Nascimento de Jesus", "Ressurrei√ß√£o de Jesus", "Morte de Jesus", "Batismo de Jesus"], c: 1, img: "https://p2.trrsf.com/image/fget/cf/940/0/images.terra.com/2023/04/03/491447970-pascoa-origem-e-significado.jpg" }
];

let current = 0, score = 0, answered = false, timeLeft = 10, timer;

// FUN√á√ÉO RANDOM (MISTURAR)
function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
}

// FUN√á√ÉO LIGAR/DESLIGAR M√öSICA
function toggleMusic() {
    const bg = document.getElementById("bgMusic");
    const btn = document.getElementById("musicToggle");
    bg.muted = !bg.muted;
    btn.textContent = bg.muted ? "üîá" : "üîä";
}

function initGame() {
    // A√ß√£o de Embaralhar antes de come√ßar
    shuffle(quizData);
    quizData.forEach(item => {
        let correctText = item.a[item.c]; 
        shuffle(item.a);
        item.c = item.a.indexOf(correctText); 
    });

    document.getElementById("startScreen").style.display = "none";
    document.getElementById("quizBox").style.display = "block";
    
    const bg = document.getElementById("bgMusic");
    bg.volume = 0.15;
    bg.play().catch(() => {});
    loadQ();
}

function loadQ() {
    answered = false;
    document.getElementById("nextBtn").style.display = "none";
    document.getElementById("feedback").textContent = "";
    document.getElementById("progress").textContent = current + 1;
    
    const item = quizData[current];
    document.getElementById("question").textContent = item.q;
    document.getElementById("image").src = item.img;
    
    const btnBox = document.getElementById("answers");
    btnBox.innerHTML = "";
    item.a.forEach((text, i) => {
        const b = document.createElement("button");
        b.textContent = text;
        b.onclick = () => check(i);
        btnBox.appendChild(b);
    });

    timeLeft = 10;
    clearInterval(timer);
    timer = setInterval(() => {
        timeLeft -= 0.1;
        document.getElementById("timerBar").style.width = (timeLeft * 10) + "%";
        document.getElementById("timeText").textContent = Math.ceil(timeLeft);
        if(timeLeft <= 0) { clearInterval(timer); check(null); }
    }, 100);
}

function check(idx) {
    if(answered) return;
    answered = true;
    clearInterval(timer);
    const item = quizData[current];
    const btns = document.querySelectorAll(".answers button");
    
    btns.forEach((b, i) => {
        b.disabled = true;
        if(i === item.c) {
            b.style.background = "#d4edda";
            b.style.borderColor = "#28a745";
            b.style.color = "#155724";
        } else if(i === idx) {
            b.style.background = "#f8d7da";
            b.style.borderColor = "#dc3545";
            b.style.color = "#721c24";
        }
    });

    if(idx === item.c) {
        score++;
        document.getElementById("feedback").textContent = "‚ú® Luz da Verdade! Acertou.";
        document.getElementById("feedback").style.color = "#28a745";
        document.getElementById("soundCorrect").play();
    } else {
        document.getElementById("feedback").textContent = "üïäÔ∏è Busque a luz do conhecimento.";
        document.getElementById("feedback").style.color = "#721c24";
        document.getElementById("soundWrong").play();
    }
    document.getElementById("nextBtn").style.display = "block";
}

function nextQ() {
    current++;
    if(current < quizData.length) loadQ();
    else showResult();
}

function showResult() {
    let title, msg, verse;
    if(score === 10) { title = "Mestre da F√©"; msg = "Incr√≠vel! Sua luz brilha intensamente."; verse = "Salmos 119:105"; }
    else if(score >= 7) { title = "Disc√≠pulo"; msg = "√ìtimo trabalho! Continue firme."; verse = "2 Pedro 3:18"; }
    else { title = "Caminhante"; msg = "Continue estudando e buscando a luz."; verse = "Mateus 7:7"; }

    document.getElementById("quizBox").innerHTML = `
        <div class="result-title">${title}</div>
        <p style="font-size:1.2rem; margin:10px 0;">Voc√™ alcan√ßou <b>${score} de 10</b> luzes.</p>
        <p style="line-height:1.5; color:#555;">${msg}</p>
        <div class="result-verse"><b>${verse}</b></div>
        
        <button class="btn-start" style="width:100%; background:#25d366; margin-bottom:10px;" onclick="shareResult()">
            üì≤ COMPARTILHAR NO WHATSAPP
        </button>

        <button class="btn-start" style="width:100%" onclick="location.reload()">REACENDER A CHAMA</button>
    `;
}

function shareResult() {
    const text = `‚ú® Lux Lucet ‚ú®\nAlcancei o n√≠vel de sabedoria no Quiz de Catequese!\nüí° Acertei ${score} de 10 luzes.\nTeste seus conhecimentos aqui:`;
    const url = window.location.href;
    window.open(`https://api.whatsapp.com/send?text=${encodeURIComponent(text + "\n" + url)}`, '_blank');
}
</script>
</body>
</html>
